---
title: "04 Summary Stats for Within Country Variation"
author: "J Andres Gannon"
date: "02/06/18"
output:
  html_notebook:
    toc: yes
    toc_float: yes
  html_document:
    toc: yes
editor_options:
  chunk_output_type: inline
---
<style>
    body .main-container {
        max-width: 100%;
    }
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

iiss <- readRDS(file = paste0(here::here(), '/data/01z_rDMC_long.rds'))
```

# Introduction
Summary of what is shown here and what part of the data is being shown
```{r}
iiss$unit_count <- as.numeric(iiss$unit_count)
iiss$tek <- as.factor(iiss$tek)

descriptr::ds_screener(iiss)
```

# Proof of concept
## 6 great powers for select technologies (2011-2017)

First we set up the data. Here, we are using a smaller subsample of technologies gathered from the infographics near the beginning of the Military Balance reports. This is the same section of the data used by Brooks and Wolforth (2016)

```{r}
### Clean
iiss_test_gp <- googlesheets::gs_read(iiss_supp, ws = "test_sample_greatpowers")
iiss_test_gp <- subset(iiss_test_gp, select = -c(artillery, attack_submarines, uav)) # Omit columns with missing country-year data
```

### Time series plots
We can show the change in technology counts over time for each country
```{r}
#### Strategic nuclear platforms
ggplot2::ggplot(iiss_test_gp, aes(x = year)) +
  geom_line(aes(y = icbm_launchers, col = "icbm_launchers"), size = 1) +
  geom_line(aes(y = bomber_aircraft, col = "bomber_aircraft"), size = 1) +
  geom_line(aes(y = ssbn, col = "ssbn"), size = 1) +
  facet_grid(. ~ country) +
  scale_color_discrete(name = "Launch Platform", labels = c("Bombers", "ICBM", "Submarines")) +
  theme_bw(base_size = 20) +
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5)) +
  guides(colour = guide_legend(override.aes = list(size = 6))) +
  labs(title = "Strategic Nuclear Platform Distribution (2011-2017)", x = "Year", y = "Count")

#### Maneuver technology platforms
ggplot2::ggplot(iiss_test_gp, aes(x = year)) +
  geom_line(aes(y = main_battle_tanks, col = "main_battle_tanks"), size = 1) +
  geom_line(aes(y = armored_infantry_vehicles, col = "armored_infantry_vehicles"), size = 1) +
  geom_line(aes(y = tactical_aircraft, col = "tactical_aircraft"), size = 1) +
  geom_line(aes(y = attack_helicopters, col = "attack_helicopters"), size = 1) +
  geom_line(aes(y = transport_helicopters, col = "transport_helicopters"), size = 1) +
  facet_grid(. ~ country) +
  scale_color_discrete(name = "Maneuver Vehicle", labels = c("Main Battle Tanks", "Armored Infantry Vehicles", "Tactical Aircraft", "Attack Helicopters", "Transport Helicopters")) +
  theme_bw(base_size = 20) +
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5)) +
  guides(colour = guide_legend(override.aes = list(size = 6))) +
  labs(title = "Maneuver Technology Platform Distribution (2011-2017)", x = "Year", y = "Count")

#### Projection technology platforms
ggplot2::ggplot(iiss_test_gp, aes(x = year)) +
  geom_line(aes(y = aircraft_carriers, col = "aircraft_carriers"), size = 1) +
  geom_line(aes(y = cruisers_destroyers_frigates, col = "cruisers_destroyers_frigates"), size = 1) +
  geom_line(aes(y = amphibious_ships, col = "amphibious_ships"), size = 1) +
  geom_line(aes(y = transport_aircraft, col = "transport_aircraft"), size = 1) +
  geom_line(aes(y = tanker_transport_aircraft, col = "tanker_transport_aircraft"), size = 1) +
  facet_grid(. ~ country) +
  scale_color_discrete(name = "Projection Platforms", labels = c("Aircraft Carriers", "Cruisers, Destroyers, Frigates", "Principal Amphibious Ships", "Transport Aircraft", "Tanker/Transport Aircraft")) +
  theme_bw(base_size = 20) +
  theme(axis.text.x = element_text(angle = 45, vjust = 0.5)) +
  guides(colour = guide_legend(override.aes = list(size = 6))) +
  labs(title = "Projection Technology Platform Distribution (2011-2017)", x = "Year", y = "Count")
```


### Subset to just the UK and India
```{r}
iiss_test_ukindia <- subset(iiss_test_gp, country == "India" | country == "UK")
```

The UK and France had similar sized defense budgets in 2017, so looking at differences in their force structure may prove informative
```{r}
#### Maneuver technology platforms
ggplot2::ggplot(iiss_test_ukindia, aes(x = year)) +
  geom_line(aes(y = main_battle_tanks, col = "main_battle_tanks"), size = 1) +
  geom_line(aes(y = armored_infantry_vehicles, col = "armored_infantry_vehicles"), size = 1) +
  geom_line(aes(y = tactical_aircraft, col = "tactical_aircraft"), size = 1) +
  geom_line(aes(y = attack_helicopters, col = "attack_helicopters"), size = 1) +
  geom_line(aes(y = transport_helicopters, col = "transport_helicopters"), size = 1) +
  scale_color_discrete(name = "Maneuver Vehicle", labels = c("Main Battle Tanks", "Armored Infantry Vehicles", "Tactical Aircraft", "Attack Helicopters", "Transport Helicopters")) +
  facet_grid(. ~ country) +
  theme_bw(base_size = 20) +
  guides(colour = guide_legend(override.aes = list(size = 6))) +
labs(title = "Maneuver Technology Platform Distribution (2011-2017)", x = "Year", y = "Count")

#### Projection technology platforms
ggplot2::ggplot(iiss_test_ukindia, aes(x = year)) +
  geom_line(aes(y = aircraft_carriers, col = "aircraft_carriers"), size = 1) +
  geom_line(aes(y = cruisers_destroyers_frigates, col = "cruisers_destroyers_frigates"), size = 1) +
  geom_line(aes(y = amphibious_ships, col = "amphibious_ships"), size = 1) +
  geom_line(aes(y = transport_aircraft, col = "transport_aircraft"), size = 1) +
  geom_line(aes(y = tanker_transport_aircraft, col = "tanker_transport_aircraft"), size = 1) +
  facet_grid(. ~ country) +
  scale_color_discrete(name = "Projection Platforms", labels = c("Aircraft Carriers", "Cruisers, Destroyers, Frigates", "Principal Amphibious Ships", "Transport Aircraft", "Tanker/Transport Aircraft")) +
  theme_bw(base_size = 20) +
  guides(colour = guide_legend(override.aes = list(size = 6))) +
  labs(title = "Projection Technology Platform Distribution (2011-2017)", x = "Year", y = "Count")
```
